(this["webpackJsonpreact-adminv4"]=this["webpackJsonpreact-adminv4"]||[]).push([[12],{208:function(e,t,n){},250:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return g}));n(21);var a,r,i=n(24),l=n(9),c=n(5),o=n(1),s=n(2),d=n(3),u=n(4),p=n(0),m=n.n(p),h=n(12),f=n(18),b=n(77),y=n(22),v=(n(65),n(33)),j=Object(f.a)({ajax:!0,modal:{width:700,title:function(e){var t=e.data,n=void 0===t?{}:t,a=n.key;return"1"===n.type?a?"\u7f16\u8f91\u83dc\u5355":"\u6dfb\u52a0\u83dc\u5355":a?"\u7f16\u8f91\u529f\u80fd":"\u6dfb\u52a0\u529f\u80fd"}}})(a=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,iconVisible:!1},e.handleSubmit=function(t){if(!e.state.loading){console.log("Received values of form: ",t);var n=t.key,a=t.parentKey,r=n?e.props.ajax.put:e.props.ajax.post,i=n?"/menus/".concat(n):"/menus",l=e.props.onOk;e.setState({loading:!0}),r(i,Object(c.a)({},t,{id:n,parentId:a})).then((function(){e.setState({visible:!1}),l&&l()})).finally((function(){return e.setState({loading:!1})}))}},e.handleCancel=function(){var t=e.props.onCancel;t&&t()},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=this.props.data,n=this.state.loading,a=t.type,r=t.icon,i=void 0===r?"bars":r,l="1"===a,o={labelWidth:70};return m.a.createElement(h.g,{surplusSpace:!1,loading:n,okText:"\u4fdd\u5b58",onOk:function(){return e.form.submit()},cancelText:"\u91cd\u7f6e",onCancel:function(){return e.form.resetFields()}},m.a.createElement(v.default,{ref:function(t){return e.form=t},onFinish:this.handleSubmit,style:{padding:16},initialValues:Object(c.a)({},t,{icon:i})},m.a.createElement(h.c,Object.assign({},o,{type:"hidden",name:"key"})),m.a.createElement(h.c,Object.assign({},o,{type:"hidden",name:"parentKey"})),m.a.createElement(h.c,Object.assign({},o,{type:"hidden",name:"type"})),m.a.createElement(h.d,null,m.a.createElement(h.c,Object.assign({},o,{label:"\u540d\u79f0",name:"text",required:!0,autoFocus:!0})),l?m.a.createElement(h.c,Object.assign({},o,{label:"\u56fe\u6807",name:"icon"}),m.a.createElement(h.f,null)):m.a.createElement(h.c,Object.assign({},o,{label:"\u7f16\u7801",name:"code",required:!0,labelTip:"\u552f\u4e00\u6807\u8bc6\uff0c\u786c\u7f16\u7801\uff0c\u524d\u7aef\u4e00\u822c\u4f1a\u7528\u4e8e\u63a7\u5236\u6309\u94ae\u662f\u5426\u663e\u793a\u3002"}))),m.a.createElement(h.d,null,m.a.createElement(h.c,Object.assign({},o,{label:"path",name:"path",labelTip:"\u83dc\u5355\u5bf9\u5e94\u7684\u9875\u9762\u5730\u5740\uff0c\u6216\u8005\u529f\u80fd\u5bf9\u5e94\u7684\u9875\u9762\u5730\u5740\u3002\u524d\u7aef\u4f1a\u57fa\u4e8e\u7528\u6237\u6240\u62e5\u6709\u7684path\uff0c\u5bf9\u8def\u7531\u8fdb\u884c\u8fc7\u6ee4\u3002"})),l?m.a.createElement(h.c,Object.assign({},o,{label:"\u6392\u5e8f",type:"number",name:"order",min:0,step:1})):null)))}}]),n}(p.Component))||a;n(208);var g=Object(f.a)({path:"/menu",title:{text:"\u83dc\u5355&\u6743\u9650",icon:"lock"},ajax:!0})(r=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,menus:[],visible:!1,record:{},iconVisible:!1},e.columns=[{title:"\u540d\u79f0",dataIndex:"text",key:"text",width:300,render:function(e,t){var n=t.icon;return n?m.a.createElement("span",null,m.a.createElement(h.e,{type:n})," ",e):e}},{title:"path",dataIndex:"path",key:"path",width:250},{title:"\u7c7b\u578b",dataIndex:"type",key:"type",width:60,render:function(e){return"1"===e?"\u83dc\u5355":"2"===e?"\u529f\u80fd":"\u83dc\u5355"}},{title:"\u6392\u5e8f",dataIndex:"order",key:"order",width:60},{title:"\u64cd\u4f5c",dataIndex:"operator",key:"operator",width:150,render:function(t,n){var a=n.type,r=void 0===a?"1":a,i=[{label:"\u7f16\u8f91",icon:"form",onClick:function(){return e.setState({data:Object(c.a)({},n,{type:r}),visible:!0})}},{label:"\u5220\u9664",icon:"delete",color:"red",confirm:{title:"\u60a8\u8bf7\u786e\u5b9a\u8981\u5220\u9664\u6b64\u8282\u70b9\u53ca\u5176\u5b50\u8282\u70b9\u5417\uff1f",onConfirm:function(){return e.handleDeleteNode(n)}}},{label:"\u6dfb\u52a0\u5b50\u83dc\u5355",icon:"folder-add",onClick:function(){return e.setState({data:{parentKey:n.key,type:"1"},visible:!0})}}];return m.a.createElement(h.h,{items:i})}}],e.handleAddTopMenu=function(){e.setState({data:{type:"1"},visible:!0})},e.handleDeleteNode=function(t){var n=t.id;e.setState({loading:!0}),e.props.ajax.del("/menus/".concat(n)).then((function(){e.setState({visible:!1}),e.handleSearch()})).finally((function(){return e.setState({loading:!1})}))},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.handleSearch()}},{key:"handleSearch",value:function(){var e=this;this.setState({loading:!0}),this.props.ajax.get("/menus").then((function(t){var n=t.map((function(e){return Object(c.a)({key:e.id,parentKey:e.parentId},e)})),a=Object(l.a)(n).sort((function(e,t){var n=e.order||0,a=t.order||0;return n||a?a-n:e.text>t.text?1:-1})),r=Object(y.a)(a);e.setState({menus:r})})).finally((function(){return e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.menus,a=t.visible,r=t.loading,l=t.data;return m.a.createElement(b.a,{className:"root-3rLoL"},m.a.createElement(h.l,null,m.a.createElement(i.default,{type:"primary",onClick:this.handleAddTopMenu},"\u6dfb\u52a0\u9876\u7ea7")),m.a.createElement(h.k,{loading:r,columns:this.columns,dataSource:n,pagination:!1}),m.a.createElement(j,{visible:a,data:l,onOk:function(){return e.setState({visible:!1},e.handleSearch)},onCancel:function(){return e.setState({visible:!1})}}))}}]),n}(p.Component))||r}}]);
//# sourceMappingURL=12.5934bc07.chunk.js.map